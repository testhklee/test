DROP SEQUENCE MEMBER_SEQUENCE;
DROP TABLE MEMBER PURGE;
DROP TABLE MEMBER;


SELECT * FROM MEMBER;

CREATE SEQUENCE MEMBER_SEQUENCE;
CREATE TABLE MEMBER (
	MEMBER_NO NUMBER PRIMARY KEY,-- 회원 번호
	MEMBER_EMAIL VARCHAR2(50) UNIQUE, -- 이메일
	MEMBER_PW VARCHAR2(50),-- 비밀번호
	MEMBER_ISTMP VARCHAR2(2), -- 임시 비밀번호 YN
	MEMBER_NAME VARCHAR2(20), -- 이름
	MEMBER_TEL VARCHAR2(20)  UNIQUE, -- 전화번호
	MEMBER_FACE VARCHAR2(200),-- 사진 경로
	MEMBER_GRADE VARCHAR2(10), -- 회원 등급
	MEMBER_ENA VARCHAR2(2), -- 탈퇴 유무
	MEMBER_JOIN_DATE DATE, -- 가입 날짜
	MEMBER_DROP_DATE DATE -- 탈퇴 날짜
);

--체크 등급 제약조건--
ALTER TABLE MEMBER 
	ADD 
		CONSTRAINT CHECK_MEMBER_GRADE 
			CHECK(MEMBER_GRADE IN('USER','ADMIN','TEACHER','BUSINESS'));

--체크 임시비번 제약조건--			
ALTER TABLE MEMBER 
	ADD 
		CONSTRAINT CHECK_MEMBER_ISTMP 
			CHECK(MEMBER_ISTMP IN('Y','N'));
			
--체크 탈퇴유무 제약조건--			
ALTER TABLE MEMBER 
	ADD 
		CONSTRAINT CHECK_MEMBER_ENA 
			CHECK(MEMBER_ENA IN('Y','N'));

SELECT * FROM MEMBER
			
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'TestBb@GMAIL.COM','1234','N','테스트','12222223','ASDKLJ','BUSINESS','N',SYSDATE,NULL);


INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'ADMIN@GMAIL.COM','1234','N','GIRI','123','ASDKLJ','ADMIN','N',SYSDATE,SYSDATE);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'TEACHER@GMAIL.COM','1234','N','GIRI','1234','ASDKLJ','TEACHER','N',SYSDATE,SYSDATE);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'USER@GMAIL.COM','1234','N','GIRI','12345','ASDKLJ','USER','N',SYSDATE,SYSDATE);

SELECT * FROM MEMBER WHERE MEMBER_EMAIL='ADMIN@GMAIL.COM' AND MEMBER_PW='1234';

SELECT NVL(COUNT(*),0) FROM MEMBER WHERE MEMBER_EMAIL='ADMIN@GMAIL.COM';

SELECT * FROM MEMBER ORDER BY MEMBER_NO DESC 

--테스트 계정 생성
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'hkk','hkk','N','한경3','010-1111-1211','resources/upload/memberFace/hk.jsp','USER','Y', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test1','test1','N','test1','010-1111-1112','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test2','test2','N','test2','010-1111-1113','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test3','test3','N','test3','010-1111-1114','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test4','test4','N','test4','010-1111-1115','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test5','test5','N','test5','010-1111-1116','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test6','test6','N','test6','010-1111-1117','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test7','test7','N','test7','010-1111-1118','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test8','test8','N','test8','010-1111-1119','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test9','test9','N','test9','010-1111-1120','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test10','test10','N','test10','010-1111-1121','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test11','test11','N','test11','010-1111-1122','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test12','test12','N','test12','010-1111-1123','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);
INSERT INTO MEMBER VALUES(MEMBER_SEQUENCE.NEXTVAL,'test13','test13','N','test13','010-1111-1124','resources/upload/memberFace/hk.jsp','USER','N', SYSDATE, NULL);


-------------------------------------------		
		



SELECT SOUP_NO, SOUP_GUBUN, SOUP_TITLE, SOUP_FIELD1, SOUP_FIELD2, SOUP_RECRUIT_END_DATE, 
			       SOUP_MEMBER_MIN, SOUP_MEMBER_MAX, SOUP_ADDR1, SOUP_ADDR2, SOUP_START_DATE, SOUP_END_DATE,
			       SOUP_DAY, SOUP_START_TIME, SOUP_END_TIME, SOUP_PRICE,
			       MEMBER_NO, MEMBER_EMAIL, MEMBER_NAME, MEMBER_FACE
			FROM
					(SELECT SOUP_NO, SOUP_GUBUN, SOUP_TITLE, SOUP_FIELD1, SOUP_FIELD2, SOUP_RECRUIT_END_DATE, 
			       SOUP_MEMBER_MIN, SOUP_MEMBER_MAX, SOUP_ADDR1, SOUP_ADDR2, SOUP_START_DATE, SOUP_END_DATE,
			       SOUP_DAY, SOUP_START_TIME, SOUP_END_TIME, SOUP_PRICE,
			       MEMBER_NO, MEMBER_EMAIL, MEMBER_NAME, MEMBER_FACE,ROW_NUMBER()OVER( ORDER BY SOUP_NO DESC)RONUMB
			FROM SOUP
			INNER JOIN
			    (SELECT MEMBER_NO, MEMBER_EMAIL, MEMBER_NAME, MEMBER_FACE, SOUP_NO
			    FROM MEMBER
			    INNER JOIN SOUP_MEMBER
			    USING (MEMBER_NO)
			    WHERE MEMBER_ENA = 'Y'
			    AND SOUP_MEMBER_GUBUN = 'L')
			USING (SOUP_NO)
			WHERE SOUP_STATUS = 'RECRUIT'
				  AND SOUP_RECRUIT_END_DATE > SYSDATE
				  AND SOUP_GUBUN='PS')
				  WHERE RONUMB LIKE 3

UPDATE MEMBER SET MEMBER_NO=56 WHERE MEMBER_NAME='한경3';




SELECT * FROM MEMBER WHERE MEMBER_NAME='이열'; AND MEMBER_EMAIL='bank8911@naver.com';


SELECT * FROM MEMBER; WHERE MEMBER_ENA='Y';

SELECT * FROM MEMBER WHERE MEMBER_ENA='N';


SELECT * FROM MEMBER WHERE MEMBER_EMAIL='USER@GMAIL.COM' AND MEMBER_TEL='12345';









	
			


